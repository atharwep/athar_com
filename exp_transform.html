<!DOCTYPE html>
<html lang="ar" dir="rtl">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ø£Ø«Ø± | ØªØ­ÙˆÙŠÙ„ Ø§Ù„Ø®Ø¨Ø±Ø§Øª</title>
    <link rel="stylesheet" href="style.css">
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;700;800;900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <script src="protection.js"></script>
</head>

<body class="dark-theme">
    <div class="bg-blobs">
        <div class="blob blob-1"></div>
        <div class="blob blob-2"></div>
        <div class="blob blob-3"></div>
    </div>

    <div class="container" style="max-width: 900px;">
        <nav>
            <div class="logo-container">
                <div class="ripple-wrapper">
                    <div class="ripple"></div>
                    <img src="ØªÙ†Ø²ÙŠÙ„.jpg" id="mainLogo" alt="Athar">
                </div>
                <div>
                    <div class="logo">Ø£Ø«Ø±</div>
                    <div class="logo-slogan">Ù…Ø­ÙˆÙ„ Ø§Ù„Ø®Ø¨Ø±Ø§Øª Ø§Ù„Ù…Ù‡Ù†ÙŠØ©</div>
                </div>
            </div>
            <a href="index.html" class="btn btn-ghost">Ø§Ù„Ø¹ÙˆØ¯Ø© Ù„Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</a>
        </nav>

        <div class="glass-card anim-fade-in" style="margin-top: 40px;">
            <h2 style="color: var(--primary); margin-bottom: 20px; font-weight: 900;">ğŸ”„ Ø¥Ø¹Ø§Ø¯Ø© ØµÙŠØ§ØºØ© Ø§Ù„Ø®Ø¨Ø±Ø§Øª</h2>
            <p style="color: var(--text-secondary); margin-bottom: 30px;">Ø­ÙˆÙ„ Ø®Ø¨Ø±Ø§ØªÙƒ Ù…Ù† Ø§Ù„Ù‚Ø·Ø§Ø¹ Ø§Ù„Ø®Ø§Øµ Ø£Ùˆ Ø§Ù„Ø¥Ø¯Ø§Ø±ÙŠ Ø¥Ù„Ù‰
                Ù…ØµØ·Ù„Ø­Ø§Øª ÙˆØµÙŠØ§ØºØ§Øª Ø§Ø­ØªØ±Ø§ÙÙŠØ© ØªÙ‚Ø¨Ù„Ù‡Ø§ Ø§Ù„Ù…Ù†Ø¸Ù…Ø§Øª Ø§Ù„Ø¯ÙˆÙ„ÙŠØ©.</p>

            <div class="form-group">
                <label>Ø®Ø¨Ø±Ø§ØªÙƒ Ø§Ù„Ø­Ø§Ù„ÙŠØ© (Ø¨Ø´ÙƒÙ„ Ø¨Ø³ÙŠØ·):</label>
                <textarea id="expInput"
                    placeholder="Ù…Ø«Ù„Ø§Ù‹: ÙƒÙ†Øª Ø£Ø¯ÙŠØ± Ù…Ø­Ù„Ø§Ù‹ ØªØ¬Ø§Ø±ÙŠØ§Ù‹ ÙˆØ£Ø´Ø±Ù Ø¹Ù„Ù‰ Ø§Ù„Ù…ÙˆØ¸ÙÙŠÙ† ÙˆØ£Ù‚ÙˆÙ… Ø¨Ø§Ù„Ø­Ø³Ø§Ø¨Ø§Øª..."
                    style="min-height: 120px;"></textarea>
            </div>

            <button id="transformBtn" class="btn btn-primary"
                style="width: 100%; justify-content: center; padding: 18px; font-size: 1.1rem; border-radius: 16px;">
                Ø¨Ø¯Ø¡ Ø§Ù„ØªØ­ÙˆÙŠÙ„ Ø§Ù„Ø°ÙƒÙŠ ğŸš€
            </button>
        </div>

        <div id="loader" style="display: none; margin: 40px 0; text-align: center;">
            <div class="loading-spinner"
                style="border: 4px solid var(--glass-border); border-top-color: var(--primary); width: 50px; height: 50px; border-radius: 50%; animation: spin 1s linear infinite; margin: 0 auto 20px;">
            </div>
            <p style="color: var(--primary); font-weight: 700;">Ø¬Ø§Ø±ÙŠ Ø¥Ø¹Ø§Ø¯Ø© ØµÙŠØ§ØºØ© 30 Ù†Ù‚Ø·Ø© Ù…Ù‡Ù†ÙŠØ©...</p>
        </div>

        <div id="resultArea" style="display: none;" class="anim-slide-up">
            <div class="glass-card" style="margin-top: 30px; border-color: var(--primary);">
                <h3 style="color: var(--primary); margin-bottom: 25px;"><i class="fas fa-magic"></i> Ø§Ù„ØµÙŠØ§ØºØ© Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø© (30
                    Ù†Ù‚Ø·Ø©):</h3>
                <div id="transformContainer"></div>

                <div
                    style="margin-top: 50px; background: rgba(16, 185, 129, 0.05); padding: 30px; border-radius: 20px; border: 1px solid var(--accent);">
                    <h3 style="color: var(--accent); margin-bottom: 20px;"><i class="fas fa-key"></i> ÙƒÙ„Ù…Ø§Øª Ù…ÙØªØ§Ø­ÙŠØ©
                        Ù‚ÙˆÙŠØ©:</h3>
                    <div id="keywordsArea" style="display: flex; flex-wrap: wrap; gap: 10px;"></div>
                </div>

                <button onclick="ProtectionManager.verify(() => window.print())" class="btn btn-ghost"
                    style="width: 100%; margin-top: 40px; justify-content: center;">
                    <i class="fas fa-print"></i> Ø·Ø¨Ø§Ø¹Ø© Ù…Ù„Ù Ø§Ù„Ø®Ø¨Ø±Ø§Øª
                </button>
            </div>
        </div>
    </div>

    <footer class="main-footer">
        <div class="footer-credit">ØªØ·ÙˆÙŠØ± ÙØ±ÙŠÙ‚ <span class="credit-name">Athar Team</span></div>
    </footer>

    <style>
        @keyframes spin {
            to {
                transform: rotate(360deg);
            }
        }

        .transform-item {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-bottom: 15px;
            padding: 15px;
            background: rgba(255, 255, 255, 0.02);
            border-radius: 12px;
            border: 1px solid var(--glass-border);
        }

        .old-text {
            color: var(--text-secondary);
            font-size: 0.9rem;
            position: relative;
            padding-right: 20px;
        }

        .old-text::before {
            content: 'Ã—';
            position: absolute;
            right: 0;
            color: var(--danger);
        }

        .new-text {
            color: var(--text-primary);
            font-weight: 600;
            position: relative;
            padding-right: 20px;
        }

        .new-text::before {
            content: 'âœ“';
            position: absolute;
            right: 0;
            color: var(--accent);
        }

        .keyword-tag {
            background: rgba(16, 185, 129, 0.1);
            color: var(--accent);
            padding: 5px 15px;
            border-radius: 100px;
            font-size: 0.85rem;
            border: 1px solid var(--accent);
        }
    </style>

    <script src="protection.js"></script>
    <script>
        document.getElementById('transformBtn').onclick = async () => {
            const exp = document.getElementById('expInput').value;
            if (!exp) return alert("ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ Ø®Ø¨Ø±Ø§ØªÙƒ Ø§Ù„Ø­Ø§Ù„ÙŠØ©");

            const btn = document.getElementById('transformBtn');
            const loader = document.getElementById('loader');
            const resultArea = document.getElementById('resultArea');

            btn.disabled = true;
            loader.style.display = 'block';
            resultArea.style.display = 'none';

            const prompt = `Ø­ÙˆÙ„ Ø§Ù„Ø®Ø¨Ø±Ø§Øª Ø§Ù„ØªØ§Ù„ÙŠØ© Ù…Ù† Ù„ØºØ© Ø§Ù„Ù‚Ø·Ø§Ø¹ Ø§Ù„Ø®Ø§Øµ/Ø§Ù„Ø¹Ø§Ø¯ÙŠ Ø¥Ù„Ù‰ Ù„ØºØ© Ø§Ù„Ù…Ù†Ø¸Ù…Ø§Øª Ø§Ù„Ø¯ÙˆÙ„ÙŠØ© (International NGOs Language): "${exp}".
            Ø§Ù„Ù…Ø·Ù„ÙˆØ¨ (JSON Ø­ØµØ±Ø§Ù‹):
            {
                "transformations": [
                    {"old": "Ø§Ù„ØµÙŠØ§ØºØ© Ø§Ù„Ø¹Ø§Ø¯ÙŠØ©", "new": "Ø§Ù„ØµÙŠØ§ØºØ© Ø§Ù„Ø§Ø­ØªØ±Ø§ÙÙŠØ© Ù„Ø¹Ù…Ù„ Ø§Ù„Ù…Ù†Ø¸Ù…Ø§Øª"}
                ],
                "keywords": ["ÙƒÙ„Ù…Ø© 1", "ÙƒÙ„Ù…Ø© 2"]
            }
            Ù…Ù„Ø§Ø­Ø¸Ø© Ø¥Ø¬Ø¨Ø§Ø±ÙŠØ©: ÙŠØ¬Ø¨ ØªÙˆÙ„ÙŠØ¯ 30 Ù†Ù‚Ø·Ø© ØªØ­ÙˆÙŠÙ„ (transformations). 
            ØªØ­Ø¯Ø« Ø¨Ø§Ù„Ø¹Ø±Ø¨ÙŠØ© ÙÙ‚Ø·.`;

            const BRIDGE_URL = "https://script.google.com/macros/s/AKfycby0-da3m_iVDFst4K4ha67SzbhC-BJ0bGVrLabj4Eh7Nosr0Jhw3zqsgRDSZiNgw5_1_w/exec";

            try {
                const res = await fetch(`${BRIDGE_URL}?action=ai`, {
                    method: "POST",
                    headers: { "Content-Type": "text/plain;charset=utf-8" },
                    body: JSON.stringify({ model: "llama-3.3-70b-versatile", messages: [{ role: "user", content: prompt }] })
                });

                const text = await res.text();
                const cleanJson = text.replace(/```json\s*|```\s*/gi, "").trim();
                const jsonMatch = cleanJson.match(/\{[\s\S]*\}/);
                if (!jsonMatch) throw new Error("Ø§Ø³ØªØ¬Ø§Ø¨Ø© ØºÙŠØ± ØµØ§Ù„Ø­Ø©");
                const data = JSON.parse(jsonMatch[0]);

                const container = document.getElementById('transformContainer');
                container.innerHTML = (data.transformations || []).map(t => `
                    <div class="transform-item">
                        <div class="old-text">${t.old}</div>
                        <div class="new-text">${t.new}</div>
                    </div>
                `).join('');

                const kwArea = document.getElementById('keywordsArea');
                kwArea.innerHTML = (data.keywords || []).map(k => `
                    <span class="keyword-tag">${k}</span>
                `).join('');

                resultArea.style.display = 'block';
            } catch (e) {
                console.error(e);
                alert("ØªØ¹Ø°Ø± ØªØ­ÙˆÙŠÙ„ Ø§Ù„Ø®Ø¨Ø±Ø§Øª Ø­Ø§Ù„ÙŠØ§Ù‹.");
            } finally {
                btn.disabled = false;
                loader.style.display = 'none';
            }
        };
    </script>
</body>

</html>